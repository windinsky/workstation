/*! my-project-name 2016-03-11 */
windinsky.define("charts/line",["jquery","d3","charts/bar"],function(a,b,c){function d(a,b){e.call(this,a,b)}var e=a("charts/bar"),f=a("d3"),g=a("jquery"),h=f.scale.category20c().domain(f.range(20));g.extend(d.prototype,e.prototype),Object.defineProperty(d.prototype,"name",{writable:!1,value:"line"}),d.prototype.refresh=function(){this.reset_size();var a=this,b=this.__prop__.padding;if(!this.data.length)return this.svg.selectAll("g.lines,g.labels,g.points").classed("hide",!0),alert("no data left to display");this.svg.selectAll("g.lines,g.labels,g.points").classed("hide",!1);for(var c=[],d=0;d<this.data[0].length;d++)for(var e=0;e<this.data.length;e++)c.push(this.data[e][d]);var g=c.map(function(a){return a[1]}),i=f.range(a.data[0].length),j=[f.min(g),f.max(g)],k=[b,this.width-2*b],l=[this.height-2*b,b];this.xScale.domain(i).rangePoints(k,0),this.yScale.domain(j).range(l),this.svg.select(".x.axis").transition().duration(0).call(this.xAxis.outerTickSize(3).innerTickSize(-this.height+3*b).tickPadding(10)).attr("transform","translate( 0 ,"+(this.height-2*b)+")"),this.svg.select(".y.axis").transition().duration(0).call(this.yAxis.outerTickSize(3).innerTickSize(-this.width+3*b)).attr("transform","translate("+b+", 0 )");var m=(f.min(a.data.reduce(function(a,b){return a.concat(b)}).map(function(a){return a[1]})),a.svg.selectAll("g.lines"));m.empty()&&(m=a.svg.append("g").attr("class","lines"));var n=f.svg.line().x(function(b,c){return a.xScale(c)}).y(function(b){return a.yScale(b[1])}).interpolate(a.__prop__.style||"monotone"),o=m.selectAll("path.line").data(a.data);o.enter().append("path").attr("class","line").attr("stroke",function(a,b){return h(b%20)}).attr("d",function(a){return n(a)}),o.transition().duration(0),o.attr("d",function(a){return n(a)}).attr("class","line").attr("stroke",function(a,b){return h(b%20)}),o.exit().transition().attr("opacity",0).remove();var p=a.svg.selectAll("g.points");return p.empty()&&(p=a.svg.append("g").attr("class","points")),this},c.exports=d});