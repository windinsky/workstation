/*! my-project-name 2016-03-11 */
windinsky.define("ui/upload",["jquery"],function(a,b,c){var d=a("jquery"),e={setup:function(a,b){a=d(a);var c=a.outerWidth(),e=a.outerHeight(),f=d('<div><input type="file"/></div>').appendTo(a),g=a.css("position");"absolute"!=g&&"relative"!=g&&"fixed"!=g&&a.css("position","relative"),f.css({position:"absolute",width:c+"px",height:e+"px",top:0,left:0,overflow:"hidden",zIndex:"50",opacity:0}).find("input").css({fontSize:"300px"}).change(function(){var c=this.files[0];if(console.log(c),c){var e=b.src,f=new FormData;f.append("image",c);var g=new XMLHttpRequest;g.withCredentials=!0,g.open("post",e,!0);var h=d(this),i=function(a){console.log(a)};g.upload.onprogress=i,g.onload=function(){h.val("");var c=JSON.parse(g.responseText);b.success.call(a,c)},g.onerror=b.error,g.send(f)}})}};c.exports=e});