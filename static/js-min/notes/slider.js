/*! my-project-name 2016-03-11 */
windinsky.define("notes/slider",["zepto"],function(a,b,c){function d(){var a=parseInt(w.css("marginLeft")),b=[],c=0,d=-(n-g(window).width());if(a>c)for(;a>c;)a=Math.max(c,a-2),b.push(a);else if(d>a)for(;d>a;)a=Math.min(d,a+2),b.push(a);var e=setInterval(function(){w.css("marginLeft",b.shift()+"px"),b.length||clearInterval(e)})}function e(a){var b,c=(new Date).getTime(),f=c-t,h=f*r;return t=c,console.log(r,f,h),u+=h,u=Math.min(Math.max(u,-n+g(".container").width()/2),50),w.css("marginLeft",u),b=u>0||u<-(n-g(window).width())?l:k,Math.abs(r)<Math.abs(b)?(r=0,d()):(r>0?r-=b:r+=b,void(s=requestAnimationFrame(e)))}function f(){r=3*r/5,r=Math.abs(r)/r*Math.min(Math.abs(r),m),t=(new Date).getTime(),u=parseInt(w.css("marginLeft")),setTimeout(function(){s=requestAnimationFrame(e)},2)}var g=a("zepto");setTimeout(function(){g("#img").ready(function(){alert(123)})},3e3);var h=g(".container img").css("width","auto");const i=2,j=.1,k=.05,l=4,m=3;var n=h.toArray().reduce(function(a,b){return a+g(b).width()},0)+i*(h.length+1);g(".container").css({width:"100%",overflow:"hidden",padding:"2px 0"});var o=0,p=0,q=0,r=0,s=null,t=0,u=0,v=null;h.css("marginLeft","2px");var w=g(".inner").css({width:n+1+"px"}).css("overflow","hidden");w.on("touchmove",function(a){var b=(new Date).getTime()-v;r=(a.touches[0].clientX-o)/b,console.log(a.touches[0].clientX,o,b,r),o=a.touches[0].clientX;var c=(parseInt(w.css("marginLeft")),q+(a.touches[0].clientX-p)),d=0,e=-(n-g(window).width());v=(new Date).getTime(),c>d&&(c/=4),e>c&&(c=e-(-n+g(window).width()-c)/4),w.css("marginLeft",c+"px"),a.preventDefault(),a.stopPropagation()}).on("touchstart",function(a){window.cancelAnimationFrame(s),v=(new Date).getTime(),r=0,p=a.touches[0].clientX,o=a.touches[0].clientX,q=parseInt(w.css("marginLeft")||0),a.preventDefault(),a.stopPropagation()}).on("touchend",function(a){Math.abs(r)<j?d():f(),a.preventDefault(),a.stopPropagation()})});