/*! my-project-name 2016-03-11 */
windinsky.define("lib/xss",["lib/xss/default","lib/xss/parser","lib/xss/util"],function(a,b,c){function d(a){return void 0===a||null===a}function e(a){var b=a.indexOf(" ");if(-1===b)return{html:"",closing:"/"===a[a.length-2]};a=k.trim(a.slice(b+1,-1));var c="/"===a[a.length-1];return c&&(a=k.trim(a.slice(0,-1))),{html:a,closing:c}}function f(a){a=a||{},a.stripIgnoreTag&&(a.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),a.onIgnoreTag=g.onIgnoreTagStripAll),a.whiteList=a.whiteList||g.whiteList,a.onTag=a.onTag||g.onTag,a.onTagAttr=a.onTagAttr||g.onTagAttr,a.onIgnoreTag=a.onIgnoreTag||g.onIgnoreTag,a.onIgnoreTagAttr=a.onIgnoreTagAttr||g.onIgnoreTagAttr,a.safeAttrValue=a.safeAttrValue||g.safeAttrValue,a.escapeHtml=a.escapeHtml||g.escapeHtml,this.options=a}var g=a("lib/xss/default"),h=a("lib/xss/parser"),i=h.parseTag,j=h.parseAttr,k=a("lib/xss/util");f.prototype.process=function(a){if(a=a||"",a=a.toString(),!a)return"";var b=this,c=b.options,f=c.whiteList,h=c.onTag,l=c.onIgnoreTag,m=c.onTagAttr,n=c.onIgnoreTagAttr,o=c.safeAttrValue,p=c.escapeHtml;if(c.stripBlankChar&&(a=g.stripBlankChar(a)),c.allowCommentTag||(a=g.stripCommentTag(a)),c.stripIgnoreTagBody){var q=g.StripTagBody(c.stripIgnoreTagBody,l);l=q.onIgnoreTag}else q=!1;var r=i(a,function(a,b,c,g,i){var q={sourcePosition:a,position:b,isClosing:i,isWhite:c in f},r=h(c,g,q);if(!d(r))return r;if(q.isWhite){if(q.isClosing)return"</"+c+">";var s=e(g),t=f[c],u=j(s.html,function(a,b){var e=-1!==k.indexOf(t,a),f=m(c,a,b,e);if(!d(f))return f;if(e)return b=o(c,a,b),b?a+'="'+b+'"':a;var f=n(c,a,b,e);return d(f)?void 0:f}),g="<"+c;return u&&(g+=" "+u),s.closing&&(g+=" /"),g+=">"}var r=l(c,g,q);return d(r)?p(g):r},p);return q&&(r=q.remove(r)),r},c.exports=f});